<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Mirrored from www.pyret.org/docs/s_timing.html by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 24 Apr 2014 07:13:04 GMT -->
<head><meta http-equiv="content-type" content="text/html; charset=utf-8" /><title>7&nbsp;Timing Pyret Programs</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default" /><link rel="stylesheet" type="text/css" href="http://www.pyret.org/docs/racket.css" title="default" /><link rel="stylesheet" type="text/css" href="scribble-style.css" title="default" /><script type="text/javascript" src="scribble-common.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist" style="margin-bottom: 1em;"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9660;</a></td><td></td><td><a href="http://www.pyret.org/docs/index.html" class="tocviewlink" data-pltdoc="x">Pyret Language Reference</a></td></tr></table></div><div class="tocviewsublistonly" style="display: block;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="s_installing.html" class="tocviewlink" data-pltdoc="x">Installing Pyret</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="s_running.html" class="tocviewlink" data-pltdoc="x">Editing and Running Pyret</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="s_forms.html" class="tocviewlink" data-pltdoc="x">Language Constructs</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="s_testing.html" class="tocviewlink" data-pltdoc="x">Testing</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="s_lists.html" class="tocviewlink" data-pltdoc="x">Lists</a></td></tr><tr><td align="right">6&nbsp;</td><td><a href="s_arrays.html" class="tocviewlink" data-pltdoc="x">Arrays</a></td></tr><tr><td align="right">7&nbsp;</td><td><a href="#" class="tocviewselflink" data-pltdoc="x">Timing Pyret Programs</a></td></tr><tr><td align="right">8&nbsp;</td><td><a href="s_cmdline.html" class="tocviewlink" data-pltdoc="x">Handling Command-<wbr></wbr>line Arguments</a></td></tr><tr><td align="right">9&nbsp;</td><td><a href="s_option.html" class="tocviewlink" data-pltdoc="x">Option</a></td></tr><tr><td align="right">10&nbsp;</td><td><a href="s_set.html" class="tocviewlink" data-pltdoc="x">Sets</a></td></tr><tr><td align="right">11&nbsp;</td><td><a href="s_numbers.html" class="tocviewlink" data-pltdoc="x">Numbers</a></td></tr><tr><td align="right">12&nbsp;</td><td><a href="s_strings.html" class="tocviewlink" data-pltdoc="x">Strings</a></td></tr><tr><td align="right">13&nbsp;</td><td><a href="s_misc.html" class="tocviewlink" data-pltdoc="x">Miscellaneous Functions</a></td></tr><tr><td align="right">14&nbsp;</td><td><a href="s_mutables.html" class="tocviewlink" data-pltdoc="x">Mutables</a></td></tr><tr><td align="right">15&nbsp;</td><td><a href="s_placeholders.html" class="tocviewlink" data-pltdoc="x">Placeholders</a></td></tr><tr><td align="right">16&nbsp;</td><td><a href="s_ast.html" class="tocviewlink" data-pltdoc="x">AST</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><a href="#(profile..time._profile..time)" class="tocsublink" data-pltdoc="x"><span style="font-weight: bold">profile.time</span></a></td></tr><tr><td><a href="#(profile..profile._profile..profile)" class="tocsublink" data-pltdoc="x"><span style="font-weight: bold">profile.profile</span></a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="version">5.3.6</span></div><div class="navsettop"><span class="navleft">&nbsp;&nbsp;</span><span class="navright">&nbsp;&nbsp;<a href="s_arrays.html" title="backward to &quot;6 Arrays&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="http://www.pyret.org/docs/index.html" title="up to &quot;Pyret Language Reference&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="s_cmdline.html" title="forward to &quot;8 Handling Command-line Arguments&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div><h3>7<tt>&nbsp;</tt><a name="(part._s~3atiming)"></a>Timing Pyret Programs</h3><p>Pyret has some limited support for timing and profiling.  It is only available
offline; to use it, include</p><blockquote class="SCodeFlow"><table cellspacing="0"><tr><td><p><span class="stt"><span class="stt">import profile as P</span></span></p></td></tr></table></blockquote><p>at the top of your source file.  It has two functions:</p><p><a name="(profile..time._profile..time)"></a><span style="font-weight: bold">profile.time</span></p><blockquote class="SCodeFlow"><table cellspacing="0"><tr><td><p><span class="stt"><span class="stt">fun &lt;a&gt; time(f :: ( -&gt; a)) -&gt; a</span></span></p></td></tr></table></blockquote><p>Takes a function of no arguments and runs it, printing information about the
time it took to run on standard output.  For example:</p><blockquote class="SCodeFlow"><table cellspacing="0"><tr><td><p><span class="stt"><span class="stt">#lang pyret</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt"></span></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt"><span class="stt">import profile as P</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt"></span></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt"><span class="stt">nums = P.time(fun():</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;</span><span class="stt">for list.map(i from list.range(0, 100)):</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">i + i</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;</span><span class="stt">end</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">end)</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt"></span></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt"><span class="stt">nums</span></span></p></td></tr></table></blockquote><p><a name="(profile..profile._profile..profile)"></a><span style="font-weight: bold">profile.profile</span></p><blockquote class="SCodeFlow"><table cellspacing="0"><tr><td><p><span class="stt"><span class="stt">fun &lt;a&gt; profile(f :: ( -&gt; a)) -&gt; a</span></span></p></td></tr></table></blockquote><p>Takes a function of no arguments and runs it, monitoring it periodically and
reporting information about which calls are visited most.  The output is
heavily reliant on the underlying Racket system, and isn&rsquo;t always in terms of
only Pyret functions that are defined in your program.  Better profiling of
Pyret programs is a work in progress.  The output format is described at
<a href="http://docs.racket-lang.org/profile/index.html#%28mod-path._profile%2Frender-text%29"><span class="url">http://docs.racket-lang.org/profile/index.html#%28mod-path._profile%2Frender-text%29</span></a>.
This has the same interface as <span class="RktSym">time</span><span class="RktMeta"></span>:</p><blockquote class="SCodeFlow"><table cellspacing="0"><tr><td><p><span class="stt"><span class="stt">#lang pyret</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt"></span></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt"><span class="stt">import profile as P</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt"></span></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt"><span class="stt">nums = P.profile(fun():</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;</span><span class="stt">for list.map(i from list.range(0, 100)):</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">i + i</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;</span><span class="stt">end</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">end)</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt"></span></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt"><span class="stt">nums</span></span></p></td></tr></table></blockquote><div class="navsetbottom"><span class="navleft">&nbsp;&nbsp;</span><span class="navright">&nbsp;&nbsp;<a href="s_arrays.html" title="backward to &quot;6 Arrays&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="http://www.pyret.org/docs/index.html" title="up to &quot;Pyret Language Reference&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="s_cmdline.html" title="forward to &quot;8 Handling Command-line Arguments&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body>
<!-- Mirrored from www.pyret.org/docs/s_timing.html by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 24 Apr 2014 07:13:04 GMT -->
</html>